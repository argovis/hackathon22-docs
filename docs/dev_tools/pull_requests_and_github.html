

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Pull Requests, Git &amp; GitHub &mdash; argovis  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Dealing With Merge Conflicts" href="merge_conflicts.html" />
    <link rel="prev" title="Merging Argo Data" href="../data_management/argo_merge.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> argovis
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_docs/point.html">Profiles API Beta Product</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_docs/grid.html">Grids API Beta Product</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data_management/point_schema.html">Point Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_management/grid_schema.html">Grid Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_management/argo_merge.html">Merging Argo Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix: Using Git &amp; Github</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pull Requests, Git &amp; GitHub</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-for-the-first-time">Setting Up For The First Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="#daily-workflow">Daily Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="merge_conflicts.html">Dealing With Merge Conflicts</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_branches.html">Using Branches</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">argovis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Pull Requests, Git &amp; GitHub</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/dev_tools/pull_requests_and_github.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pull-requests-git-github">
<span id="prs"></span><h1>Pull Requests, Git &amp; GitHub<a class="headerlink" href="#pull-requests-git-github" title="Permalink to this headline">¶</a></h1>
<p>When collaborating on a coding project, we generically want a workflow that looks like this:</p>
<img alt="../_images/git-flow-0.png" src="../_images/git-flow-0.png" />
<ul class="simple">
<li><p>The official version of the code should be somewhere anyone can download it from</p></li>
<li><p>You should be able to make and experiment with your own changes on your own machine</p></li>
<li><p>There should be a way for you to then propose that your changes be accepted into the official version, with a mechanism for feedback and corrections beforehand.</p></li>
</ul>
<p>Git is the defacto tool for managing the detailed history of a piece of code; GitHub, by extension, adds on some critical features that support the <em>collaborative process</em>. In this tutorial, we’ll learn how to set up and execute <em>Pull Requests</em>, GitHub’s name for the collaborative flow pictured above.</p>
<p>To follow this tutorial, you’ll need:</p>
<blockquote>
<div><ul class="simple">
<li><p>a free GitHub account</p></li>
<li><p>git installed in your bash environment</p></li>
</ul>
</div></blockquote>
<p>Our examples will show the workflow with the repository <a class="reference external" href="https://github.com/argovis/argovisNg">argovisNg</a>, but the same applies to all argovis repositories (and most any other repository you find on GitHub).</p>
<div class="section" id="setting-up-for-the-first-time">
<h2>Setting Up For The First Time<a class="headerlink" href="#setting-up-for-the-first-time" title="Permalink to this headline">¶</a></h2>
<p>When you first want to start collaborating on a code repository, there are some one-time setup steps you must perform:</p>
<ol class="arabic">
<li><p><em>Fork</em> the repository in question; this is GitHub’s jargon for making a copy of the official repository you want to contribute to in your own GitHub account. Visit <a class="reference external" href="https://github.com/argovis/argovisNg">https://github.com/argovis/argovisNg</a>, and click the <strong>Fork</strong> button near the top right corner of the screen. If it asks “Where should we fork?”, choose your own GitHub username from the list.</p>
<p>Once successfully completed, you should have a copy of the repository under your own account on GitHub. Notice near the top left of the resulting page, the repo title is <code class="docutils literal notranslate"><span class="pre">&lt;username&gt;/argovisNg</span></code>, whereas the original was <code class="docutils literal notranslate"><span class="pre">argovis/argovisNg</span></code>.</p>
</li>
<li><p><em>Clone</em> your fork of the repository to your development machine. To do so, open a bash shell on your machine and do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~ $ git clone &lt;URL of YOUR fork of the repo&gt;
</pre></div>
</div>
<p>Notice the URL to substitute is that of your fork of the repo - this is the copy you’ll be able to edit directly.</p>
<p>If successful, a directory named the same as the repo should appear on your machine. Enter it, and check your first <em>remote</em>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~ $ <span class="nb">cd</span> argovisNg
argovisNg $ git remote -v

origin  https://github.com/BillMills/argovisNg <span class="o">(</span>fetch<span class="o">)</span>
origin  https://github.com/BillMills/argovisNg <span class="o">(</span>push<span class="o">)</span>
</pre></div>
</div>
<p>By default, you get one remote named <code class="docutils literal notranslate"><span class="pre">origin</span></code>. Remotes are shorthand names for remote repositories; you’ll see later in this lesson how you can use this shorthand when communicating with GitHub.</p>
</li>
<li><p>Set up a second remote that’s a shorthand for the main repository we’re working with, <code class="docutils literal notranslate"><span class="pre">https://github.com/argovis/argovisNg</span></code> in this example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>argovisNg $ git remote add upstream https://github.com/argovis/argovisNg
</pre></div>
</div>
<p>The name <code class="docutils literal notranslate"><span class="pre">upstream</span></code> is arbitrary, but it is a common convention since it points at the version of the code that is ‘upstream’ from our own.</p>
</li>
</ol>
<div class="admonition-disaster-strikes admonition">
<p class="admonition-title">Disaster Strikes?</p>
<p>If things ever go truly wrong with the version of the code on your machine, you can always delete the directory you made and start over from the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> step above. Note that this will destroy any work you hadn’t uploaded to GitHub, but can often be the fastest and easiest way to recover from disaster cases.</p>
</div>
<p>Now that we’ve finished our one-time setup steps, we (at least in principle) never need to do them again; the following diagram summarizes the relationships between everything we’ve seen so far.</p>
<img alt="../_images/git-flow-1.png" src="../_images/git-flow-1.png" />
</div>
<div class="section" id="daily-workflow">
<h2>Daily Workflow<a class="headerlink" href="#daily-workflow" title="Permalink to this headline">¶</a></h2>
<p>Now that we’re all set up, we’re ready to begin the daily activity of writing code and proposing it as an update to the main repositories. Qualitatively, the workflow looks like this:</p>
<blockquote>
<div><ul class="simple">
<li><p>Check and see if anyone else added code to the main repository since last time you worked on the project.</p></li>
<li><p>Make your changes to your local copy of the code.</p></li>
<li><p>Upload your changes to your copy of the code on GitHub.</p></li>
<li><p>Ask the main project maintainer to accept your proposed changes to the main repository.</p></li>
<li><p>Respond to any corrections or questions the maintainers have.</p></li>
</ul>
</div></blockquote>
<ol class="arabic">
<li><p>First, we want to keep our local copy of the code up to date with what everyone else has been working on since last we checked; this is where the remotes we set up are going to come in handy. Download any new changes from the main repo to our local machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>argovisNg $ git pull upstream main
</pre></div>
</div>
<p>The anatomy of this command is:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code>: download some code…</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upstream</span></code>: …from <code class="docutils literal notranslate"><span class="pre">upstream</span></code>, which recall is shorthand for the URL of the main repo</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code>: …from the branch named <code class="docutils literal notranslate"><span class="pre">main</span></code>. If we want to get fancy later we can start making branches other than <code class="docutils literal notranslate"><span class="pre">main</span></code>, but it’s best to just stick to <code class="docutils literal notranslate"><span class="pre">main</span></code> the first time you try this.</p></li>
</ul>
</li>
</ol>
<div class="admonition-merge-conflict admonition">
<p class="admonition-title">Merge Conflict?</p>
<p>What happens if someone changed some code upstream that contradicts a change you were working on locally? This is called a <em>merge conflict</em>, and sooner or later you will get one when you do a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code>. Don’t worry about it for now, but when you see one, refer to <a class="reference internal" href="merge_conflicts.html#merge-conflict"><span class="std std-ref">Dealing With Merge Conflicts</span></a> for a recipe for dealing with this.</p>
</div>
<ol class="arabic" start="2">
<li><p>Now you’re all set up to get down to the business of writing code. Go for it!</p></li>
<li><p>Once you’re happy with the code you’ve written (and I recommend at least once per day), <em>commit</em> and <em>push</em> your code.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>argovisNg $ git add &lt;names of any new files you created <span class="k">for</span> this commit&gt;
argovisNg $ git commit -a -m <span class="s1">&#39;a short description of my awesome code&#39;</span>
argovisNg $ git push origin main
</pre></div>
</div>
<p>The anatomy of these commands are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">&lt;files&gt;</span></code>: start tracking some new files in version control. This line can be omitted if you didn’t create any new files, and just edited pre-existing files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>: save the current state of my code for all time so I can come back to it if I screw up later.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-a</span></code>: include every file in this commit that git was already tracking</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">'blah</span> <span class="pre">blah'</span></code>: a short message to help you remember what this commit was about in future.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>: upload the code…</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">origin</span></code>: …to the remote named <code class="docutils literal notranslate"><span class="pre">origin</span></code> (remember, that’s your copy of the repo on GitHub)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code>: …from the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch locally to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch on the remote.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p>Once you think you’re ready for the maintainers to review your code and consider it for inclusion in the main repo, it’s time to set up a <em>pull request</em>. In your browser, go back to GitHub and find your copy of the repo you’re working on - the URL should be <code class="docutils literal notranslate"><span class="pre">https://github.com/&lt;username&gt;/argovisNg</span></code>. Once there:</p>
<ul>
<li><p>Click on <strong>Pull requests</strong></p></li>
<li><p>Click the big green button that says <strong>New pull request</strong>.</p></li>
<li><p>You’ll now be on the pull request (PR) setup screen. There are a few things for you to do here:</p>
<blockquote>
<div><ul class="simple">
<li><p>GitHub summarizes the changes this PR will make on this screen. Review them to make sure they are what you intended. Common mistakes are to include too many or too few files in the PR: too few because you forgot to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> something new, or too many because you <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">*</span></code> and scooped up things you didn’t mean to with the wildcard.</p></li>
<li><p>[optional]: if you’re using branches other than the defaults, on this screen you can choose origin and destination branches. If you’re just going <code class="docutils literal notranslate"><span class="pre">main</span></code> to <code class="docutils literal notranslate"><span class="pre">main</span></code>, you don’t need to change anything.</p></li>
<li><p>Once you’re happy with the changes, click the big green <strong>Create pull request</strong> button.</p></li>
<li><p>You’ll be taken to a screen with a large text box - write a message to the project maintainers explaining what you changed and why, providing any context or information you think is relevant.</p></li>
<li><p>Finally, again click on the <strong>Create pull request</strong> button.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>At this point, you’ve submitted your changes for review to the project maintainers; check back on this page tomorrow and see if they have any comments.</p>
</li>
<li><p>It’s often the case that project maintainers will provide a review of your work in your PR, asking for corrections or changes. You can do one of two things:</p>
<ul class="simple">
<li><p>Make the changes requested on your local version of the code, commit the changes, and push them to the same branch, exactly as you did above. The new commits will appear in the open pull request as amendments.</p></li>
<li><p>Reply in the thread on the PR page to answer questions and explain your reasoning.</p></li>
</ul>
<p>Once the maintainers are satisfied, they can <em>merge</em> your PR, which means your changes have been accepted to the main version of the code.</p>
<p>The workflow for making contributions to git repositories we learned here can be summarized with the diagram below, and is how all Argovis projects are maintained. Notice it is exactly the same as the first diagram above that describes generic collaboration; now you know how git and GitHub operations map onto the collaboration workflow.</p>
</li>
</ol>
<img alt="../_images/git-flow-2.png" src="../_images/git-flow-2.png" />
</div>
<div class="section" id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h2>
<p>So far, we’ve learned the mechanical commands of proposing changes to projects on GitHub, but there are a few ‘soft skills’ to keep in mind:</p>
<ol class="arabic simple">
<li><p><strong>Make small, frequent PRs</strong>: a good pull request should implement exactly one feature - not the dozen things you’re currently thinking about all at once. If you’re working on more than one thing in parallel, see <a class="reference internal" href="using_branches.html#branches"><span class="std std-ref">Using Branches</span></a> for an introduction to using <em>branches</em>. A good rule of thumb is that whenever possible, PRs should be <em>no more than 500 lines</em>. The reason for this is speed: huge PRs take a long time to write and a long time to review, so by the time it’s ready for merge, the main project might have changed a lot, conflicting with your changes and undermining their original purpose.</p></li>
<li><p><strong>Commit and push early and often</strong>: in the above workflow, it looks like you committed, pushed, and set up a PR all as one series of steps. Actually, you can and should commit and push code to your copy of the repositories <em>very frequently</em>; you don’t need to set up a PR untill you’re ready to discuss your changes, and a single PR can have arbitrarily many commits included. Remember that committing and pushing effectively backs up your code: once pushed, GitHub has a copy and keeps it safe.</p></li>
<li><p><strong>Pull early and often</strong>: if you’re working on a piece of code for a long time (like longer than one day), do the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> step every day at least. This way, if someone is making changes to the code that conflict with yours, you can catch it early and solve the problem while its still relatively easy. See <a class="reference internal" href="merge_conflicts.html#merge-conflict"><span class="std std-ref">Dealing With Merge Conflicts</span></a> for a discussion of handling merge conflicts.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="merge_conflicts.html" class="btn btn-neutral float-right" title="Dealing With Merge Conflicts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../data_management/argo_merge.html" class="btn btn-neutral float-left" title="Merging Argo Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Argovis Collaboration.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>